name: can-publish

on:
    pull_request:
        branches: [release]

jobs:
    build:
        runs-on: ubuntu-latest

        steps:
            - uses: actions/checkout@v3
            - uses: actions/setup-node@v3
              with:
                  node-version: 18.x
                  registry-url: 'https://registry.npmjs.org'
                  always-auth: true
            - uses: pnpm/action-setup@v2
            - name: dry-run and comment to the PR
              uses: thollander/actions-comment-pull-request@v2
              with:
                  message: >
                      Following packages will be published if you accept this PR.

                      ```
                      $(pnpm -r publish --dry-run)
                      ```
